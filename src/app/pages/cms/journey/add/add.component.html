<div class="row">
  <div class="col-md-12">
    <nb-card>
      <nb-card-header>{{page_title}}</nb-card-header>
      <nb-card-body>
        <form name="form" (ngSubmit)="f.form.valid && onSubmit()"  #f="ngForm" novalidate>

          <div class="form-group row">
            <label for="nav_title" class="col-6 col-md-4 col-form-label">Navigation Title</label>
            <div class="col-12 col-md-8">
              <input type="text" class="form-control" name="nav_title" id="nav_title" placeholder="Navigation Title" [(ngModel)]="model.nav_title" #nav_title="ngModel" [ngClass]="{ 'is-invalid': f.submitted && nav_title.invalid }" required/>
              <div *ngIf="f.submitted && nav_title.invalid" class="invalid-feedback">
                <div *ngIf="nav_title.errors?.required">Navigation Title is required</div>
              </div>
            </div>
          </div>

          <div class="form-group row">
            <label for="header" class="col-6 col-md-4 col-form-label">Header</label>
            <div class="col-12 col-md-8">
              <input type="text" class="form-control" name="header" id="header" placeholder="Header" [(ngModel)]="model.header" #header="ngModel" [ngClass]="{ 'is-invalid': f.submitted && header.invalid }" required/>
              <div *ngIf="f.submitted && header.invalid" class="invalid-feedback">
                <div *ngIf="header.errors?.required">Header is required</div>
              </div>
            </div>
          </div>

          <div class="form-group row">
            <label for="content" class="col-6 col-md-4 col-form-label">Content</label>
            <div class="col-12 col-md-8">
              <textarea class="form-control" name="content" id="content" placeholder="Content" [(ngModel)]="model.content" #content="ngModel" [ngClass]="{ 'is-invalid': f.submitted && content.invalid }" required></textarea> 
              <div *ngIf="f.submitted && content.invalid" class="invalid-feedback">
                <div *ngIf="content.errors?.required">Content is required</div>
              </div>
            </div>
          </div>

          <div class="form-group row">
            <label for="header" class="col-6 col-md-4 col-form-label">Sequence</label>
            <div class="col-12 col-md-8">
              <input type="number" min="1"  class="form-control" name="seq_no
              " id="seq_no" placeholder="Sequence" [(ngModel)]="model.seq_no" #seq_no="ngModel" [ngClass]="{ 'is-invalid': f.submitted && seq_no.invalid }" required/>
              <div *ngIf="f.submitted && seq_no.invalid" class="invalid-feedback">
                <div *ngIf="seq_no.errors?.required">Sequence is required</div>
              </div>
            </div>
          </div>

          <div *ngIf="isEdit"> 
            <div class="upload-img form-group row" *ngIf="model.avatar && !changeImageFlag">
              <label class="col-6 col-md-4 col-form-label">Picture</label>
              <div class="col-12 col-md-8">
                <img src="{{API_URL}}{{model.avatar}}">
              </div>
            </div>

            <div class="form-group row">
              <label class="col-6 col-md-4 col-form-label"></label>
              <div class="col-12 col-md-8">                
                <button  type="button" class="btn btn-primary mr-1 mb-1 " (click)="changeImage()" [hidden]="!model.avatar || changeImageFlag">Change</button>
                <button  type="button" class="btn btn-primary mr-1 mb-1 " (click)="removeImage(model.avatar) " [hidden]="!model.avatar || changeImageFlag">Remove</button>
              </div>
            </div>

            <div class="form-group row" *ngIf="changeImageFlag || !model.avatar">
              <label class="col-6 col-md-4 col-form-label">Picture</label>
              <div class="col-12 col-md-8">
                <input type="file" (change)="changeListener($event)" >
              </div>
            </div>
            <div class="upload-img form-group row" *ngIf="image">
              <label class="col-6 col-md-4 col-form-label"></label>
              <div class="col-12 col-md-8">
                <img  src="{{image}}">
              </div>
            </div>    
            <div class="form-group row" >
              <label class="col-6 col-md-4 col-form-label"></label>
              <div class="col-12 col-md-8">
              <button type="button" class="btn btn-primary mr-1 mb-1 " (click)="UploadImage() " [hidden]="!image " [disabled]="disableFlag ">Upload</button>
              <button type="button " class="btn btn-primary mr-1 mb-1 " (click)="removeImage() " [hidden]="!image">Remove</button>
            </div>
            </div>
          </div>

          <div *ngIf="!isEdit">
            <div class="form-group row">
              <label class="col-6 col-md-4 col-form-label">Picture</label>
              <div class="col-12 col-md-8">
                <input type="file" (change)="changeListener($event)" >
              </div>
            </div>
            <div class="upload-img form-group row" *ngIf="image">
              <label class="col-6 col-md-4 col-form-label"></label>
              <div class="col-12 col-md-8">
                <img  src="{{image}}">
              </div>
            </div>         
            <div class="form-group row">
              <label class="col-6 col-md-4 col-form-label"></label>
              <div class="col-12 col-md-8">                
                <button type="button" class="btn btn-primary mr-1 mb-1 " (click)="UploadImage()" [hidden]="!image" [disabled]="disableFlag ">Upload</button>
                <button type="button" class="btn btn-primary mr-1 mb-1 " (click)="removeImage()" [hidden]="!image">Remove</button>
              </div>
            </div>
          </div> 
          

          <div class="form-group row">
            <div class="offset-md-4 col-md-8">
              <button type="submit" class="btn btn-primary" >Submit</button>
              <a class="btn btn-primary" [routerLink]="['/pages/cms/about/journey/list']">Cancel</a>
            </div>
          </div>
        </form>
      </nb-card-body>
    </nb-card>
  </div>
</div>
